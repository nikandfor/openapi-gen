{{- if .help -}}
Golang server generator

Arguments
    package - package name (default: oapi)
    service - service name (default: Service)
{{ else -}}
{{ $srv := (or .args.service "Service") | title -}}
/* OpanAPI {{ .swagger.Info.Title }} server
{{ with .swagger.Info.Description }}{{ . }}{{ end -}}
{{ with .swagger.Info.Version }}Version: {{ . }}{{ end }}

Generated by opanapi-gogen. DO NOT EDIT MANUALLY!
*/

// Command: {{ .command }}

{{- with .args.buildtags }}

// +build {{ . }}{{ end }}

package {{ or .args.package "oapi" }}

type (
	{{ with .swagger.Components -}}
		// schemas
		{{ range $name, $v := .Schemas -}}
			{{ $name | title }} {{ template "schemaType" . }}

		{{ end }}

		// requests
		{{ range $name, $v := .RequestBodies -}}
			{{ range $ct, $v := .Value.Content -}}
				{{ if not .Schema.Ref -}}
				{{ $name | title }} {{ template "schemaType" .Schema }}

				{{ end -}}
			{{ end -}}
		{{ end }}

		// responses
		{{ range $name, $v := .Responses -}}
			{{ range $ct, $v := .Value.Content -}}
				{{ if not .Schema.Ref -}}
				{{ $name | title }} {{ template "schemaType" .Schema }}

				{{ end -}}
			{{ end -}}
		{{ end }}
	{{ end -}}
)

{{ end -}}
